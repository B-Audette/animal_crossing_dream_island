<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <div id="data">
        <form action="/api/oneVillager">
            <input list="allVillagers" name="allVillagers" id="vi">
            <datalist id="allVillagers">
                <option value>

            </datalist>
            <input type="submit" id="searchbtn">
        </form>
    </div>

    <button id="addIsland"> add villager to island</button>
    <button id="addDreamy"> add villager to dream list</button>

    <button id="view">view villagers</button>

    <div id="stats"></div>
    <div id="poster"></div>
    <div id="house"></div>

</body>
<script src="https://code.jquery.com/jquery.js"></script>

<script>
    // pulls villagers to dropdown
    $.get("/api/all_villagers").then(function (data) {
        for (i = 0; i < data.length; i++) {
            $("#allVillagers").append("<option value='" +
                data[i].name + "'></option>");
        }


    })

    //========pulls villlager data from submit button & writes to page elements #stats/#poster/#house
    $("#searchbtn").click((function (event) {
        // Make sure to preventDefault on a submit event.
        event.preventDefault();
        let searchedVillager = $("#vi").val().trim()
    
        console.log(searchedVillager)

        $.get("/api/oneVillager/"+ searchedVillager 
        ).then(function (response) {
            console.log(response);
            $("#stats").append(`<li>Name: ${response.name}</li>`, 
            `<li>Species: ${response.species}</li>`,
            `<li>Personality: ${response.personality}</li>`,
            `<li>Hobby: ${response.hobby}</li>`,
            `<li>Colors: ${response.colors}</li>`,
            `<li>Catchphrase: ${response.catchphrase}</li>`,
            `<li>Birthday: ${response.birthday}</li>`,
            `<li>Favorite Song: ${response.favoriteSong}</li>`);
            $("#poster").append(`<img src="${response.photoImage}"/>`)
            $("#house").append(`<img src="${response.houseImage}"/>`)
            
        })
    })
    )

    //================================================================

    // addIsland and addDreamy adds villager to our database -


    // ********TODO add logic for click event?
    $("#addIsland").on("click", function () {
        $.post("/api/villagers", { "name": "Kevin", "dreamy": false })
        
    })
    // *******TODO add logic for click event?
    $("#addDreamy").on("click", function () {
        $.post("/api/villagers", { "name": "Kevin", "dreamy": true })

    })

    //pulls in villagers in our database
    $("#view").on("click", function () {
        $.get("api/villagers", function (data) {
            console.log(data);
        })
    })



</script>

</html>