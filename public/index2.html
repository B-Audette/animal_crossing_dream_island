<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <div id="data">
        <form action="/api/oneVillager">
            <input list="allVillagers" name="allVillagers" id="vi">
            <datalist id="allVillagers">
                <option value>

            </datalist>
            <input type="submit" id="searchbtn">
        </form>
    </div>

    <button id="add"> add villager</button>

    <button id="view">view villagers</button>

    <div id="stats"></div>
    <div id="poster"></div>
    <div id="house"></div>

</body>
<script src="https://code.jquery.com/jquery.js"></script>

<script>
    // experimenting with some ways to pull in data from the all_villagers api get - this is the npm package
    $.get("/api/all_villagers").then(function (data) {
        for (i = 0; i < data.length; i++) {
            // $("#data").append(JSON.stringify(data[i].name));
            // $("#image-div").html("<img src='https:// . . .' />");
            $("#allVillagers").append("<option value='" +
                data[i].name + "'></option>");
        }


    })
    // set
    // $.get("/api/all_villagers").then (function(data){
    //     console.log(JSON.stringify(data));

    //     //populate dropdown with list of villagers
    //     for(i=0; i < data.length; i++)
    //     allVillagerNames = data[i].name


    // })


    //================================================================
    $("#searchbtn").click((function (event) {
        // Make sure to preventDefault on a submit event.
        event.preventDefault();
        let searchedVillager = $("#vi").val().trim()
    
        console.log(searchedVillager)

        $.get("/api/oneVillager/"+ searchedVillager 
        ).then(function (response) {
            console.log(response);
            $("#stats").append(`<li>Name: ${response.name}</li>`, 
            `<li>Species: ${response.species}</li>`,
            `<li>Personality: ${response.personality}</li>`,
            `<li>Hobby: ${response.hobby}</li>`,
            `<li>Colors: ${response.colors}</li>`,
            `<li>Catchphrase: ${response.catchphrase}</li>`,
            `<li>Birthday: ${response.birthday}</li>`,
            `<li>Favorite Song: ${response.favoriteSong}</li>`);
            $("#poster").append(`<img src="${response.photoImage}"/>`)
            $("#house").append(`<img src="${response.houseImage}"/>`)
            
        })
    })
    )

    //================================================================










    // adds villager to our database
    $("#add").on("click", function () {
        $.post("/api/villagers", { "name": "Kevin", "dreamy": false })
    })
    //pulls in villagers in our database
    $("#view").on("click", function () {
        $.get("api/villagers", function (data) {
            console.log(data);
        })
    })



</script>

</html>